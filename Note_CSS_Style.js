box-shadow: rgba(0, 0, 0, 0.09) 0px 15px 15px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.10) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px !important;

// light
box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset
!important

// getAllProductList api - Product_details_pdf -  search for privacy policy Document and for PPD section when add from backend than yha par se true krna hai 
// products image payload object for on Bio banking section
{
    "id": 51,
    "product_name": "Human iPSC Cell Lines (SV-HiPS20-1-500-L)",
    "product_slug": "human-ipsc-cell-lines-sv-hips20-1-500-l",
    "product_description": "Human iPSC Cell Lines (SV-HiPS20-1-500-L)",
    "CatalogueNumber": "SV-HiPS20-1-500-L",
    "LotNumber": "",
    "short_description": "<p><span style=\"font-size: 16px;\">Induced Pluripotent Stem Cells (iPSC), Dermal (skin) derived, Caucasian, Male, 22, Live</span></p>",
    "category_id": 15,
    "stock": "In Stock",
    "deliver_type": "Live",
    "product_image": "1714733367177.webp,1714383751820.svg,1705301453224.svg,1688365619128.jpg",
    "Product_details_pdf": "1705156906503.pdf",
    "description_tab": "true",
    "specification_tab": "true",
    "ViralScreening_tab": "true",
    "Pluripotency_tab": "true",
    "Differentiation_tab": "true",
    "microbiology_viralscreening": {
        "id": 57,
        "product_id": 51,
        "HepatitisA": "Negative",
        "HepatitisB": "Negative",
        "HepatitisC": "Negative",
        "Mycoplasma": "Negative",
        "Inoculationformicrobiologicalgrowth": "Negative",
        "Genotype": "null",
        "ReprogrammingMethod": "null",
        "ReprogrammingConditions": "null",
        "Differentiation": "<p><span data-preserver-spaces=\"true\" style=\"box-sizing: border-box; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; font-size: 16px;\"><strong>Stemnovate IPSC lines are capable of differentiating into different organ cells. <span style=\"font-size: 16px;\">F</span><span style=\"font-size: 16px;\"><span style=\"font-size: 16px;\">or instance,</span></span></strong></span><span data-preserver-spaces=\"true\" style=\"box-sizing: border-box; -webkit-font-smoothing: antialiased; color: rgb(51, 51, 51); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; font-size: 16px;\"><strong>&nbsp;functional liver cells (Hepatocytes), heart cells (Cardiomyocytes showing key cardiac markers and beating behaviour), and sensory neurons (showing neuronal marker expression and action potential generation on microelectrode arrays).</strong></span></p>",
        "Differentiationimages": "",
        "Pluripotencyimages": "",
        "Pluripotency": "<p><span style=\"font-size: 16px;\">Stable line characterised for expression of endogenous pluripotency markers, Oct4, Sox2, Nanog, Lin28, Tra1-60, SSEA4.&nbsp; Transcriptome data available (Request information).</span>&nbsp;</p>",
        "HIV_1": "Negative",
        "HIV_2": "Negative",
        "Sterility": "null",
        "Fungi": "null",
        "Antibiotics_Added": "null",
        "Validation": "null",
        "Specificity": "null",
        "Positive_Controls": "null",
        "Biosafety_and_Handling": "null"
    },
    "productdescription": {
        "id": 57,
        "product_id": 51,
        "Features": "<p><span style=\"font-size: 16px;\">Stemnovate offers high-quality human iPSC Cell Lines for researchers and scientists. They use these iPSC cell lines in disease modelling and other stem cell research.</span></p><p><span style=\"font-size: 16px;\"><br>The iPS lines show stable expression of core pluripotency genes such as NANOG, TRA 1-60, OCT4, SOX2, LIN28 over several passages and&nbsp;characterisation includes immunochemistry qPCR analyses.&nbsp;</span></p><p><span style=\"font-size: 16px;\"><br>The feeder-free and serum-free conditions help cells to maintain in pluripotent state and long-term storage while frozen below -80ºC or in liquid Nitrogen. Stemnovate has whole-genome transcriptomics and the genotype information for all iPSC lines. In other words, bioinformatic evaluation includes comparative studies to three human embryonic stem cell lines.</span></p><p><span style=\"font-size: 16px;\"><br>Stemnovate iPSCs form embryoid bodies and differentiate into derivatives of the three germ layers in vitro. As a result, IPS on differentiation into embryoid bodies express ECTODERM MESODERM and ENDODERM Markers.</span></p>",
        "ProductTesting": "<p><span style=\"font-size: 16px;\">Stemnovate does not sell or generate human embryonic stem cell lines. The pre-established HES lines are for research and development purposes only.</span>&nbsp;</p>",
        "Applications": "<p><span style=\"font-size: 16px;\">Stemnovate's induced pluripotent cells (iPSCs) are formed by reprogramming somatic cells such as skin (fibroblasts and keratinocytes) or blood (PBMNCs - peripheral blood mononuclear cells). Therefore, iPSCs represent a unique and ethical tool for modelling disease and organ toxicity, with enormous potential for drug discovery and cellular therapies.</span></p><p><span style=\"font-size: 16px;\">The non-integrating methods results in stable IPS line generation with high efficiency and reproducibility compared to other viral reprogramming methods. The ability to expand pluripotent cells in-vitro and subject them to direct differentiation to produce specific cell types is crucial to developing cell based therapies to replace or restore tissue.</span></p>",
        "Compliance": "<p><span style=\"font-size: 16px;\">Stemnovate holds a commercial license from IPS Academia Japan for which Prof. Yamanaka and Prof. Gurdon received the Noble prize in 2012 for reprogramming technology.</span></p><p><span style=\"font-size: 16px;\"><br></span></p><p><span style=\"font-size: 16px;\">Stemnovate human iPS cell lines are tested negative for HIV-1. HIV-2, Hepatitis-A, Hepatitis-B, Bacteria and Microplasma.</span></p>\r\n\r\n\r\n\r\n\r\n"
    },
    "productspecification": {
        "id": 47,
        "product_id": 51,
        "LineHistory": "Caucasian, 22 year old Male",
        "CellType": "Induced Pluripotent stem cell",
        "Cryopreservedvolume": "1 ml",
        "Storage": "Liquid Nitrogen",
        "PostFreezeViability": "70%-75%",
        "Growth": "Adherent",
        "Ethnicity": "Caucasian",
        "Age": "22",
        "Sex": "Male",
        "Passage_Number": "-",
        "TissueSource": "Dermal (Skin)",
        "CellNumbers": "500,000",
        "Adherence": "",
        "Viability": "70%-75%",
        "Base_Formulation": "null",
        "Serum": "null",
        "Target_Species": "null",
        "Glutamine": "null",
        "Buffer": "null",
        "Indicator": "null",
        "Growth_Factors": "null",
        "Target": "null",
        "Detection_method": "null",
        "Reaction_Mix_1": "null",
        "Reaction_Mix_2": "null",
        "Internal_Control": "null",
        "Positive_Control_Templates": "null"
    },
    "product_details": {
        "id": 47,
        "product_id": 51,
        "SKU": "",
        "MRP": 0,
        "regular_price": 0,
        "sale_price": 3600,
        "currency": "GBP",
        "product_unit": "1 T-25 Flask",
        "shipping_cost": 50,
        "offer_price": 0
    },
    "resources_id": 0,
    "category": {
        "category_name": "Induced Pluripotent Stem Cells"
    }
}

// on refresh
{
    "id": 21,
    "product_name": "Primary Human Fibroblasts (SV-HF-8-500-F)",
    "product_slug": "primary-human-fibroblasts-sv-hf-8-500-f",
    "product_description": "Primary Human Fibroblasts (SV-HF-8-500-F)",
    "CatalogueNumber": "SV-HF-8-500-F",
    "LotNumber": "",
    "short_description": "<p><span style=\"font-size: 16px;\">Human Fibroblasts, Dermal (skin) derived, Caucasian, Female, 40</span></p>",
    "category_id": 13,
    "stock": "In Stock",
    "deliver_type": "Frozen",
    "product_image": "1710143426479.svg",
    "primary_product_image": "1714366092937.svg",
    "Product_details_pdf": "1705150689833.pdf",
    "description_tab": "true",
    "specification_tab": "true",
    "ViralScreening_tab": "true",
    "Pluripotency_tab": "false",
    "Differentiation_tab": "false",
    "microbiology_viralscreening": {
        "id": 17,
        "product_id": 21,
        "HepatitisA": "Negative",
        "HepatitisB": "Negative",
        "HepatitisC": "Negative",
        "Mycoplasma": "Negative",
        "Inoculationformicrobiologicalgrowth": "Negative",
        "Genotype": "",
        "ReprogrammingMethod": "",
        "ReprogrammingConditions": "",
        "Differentiation": "",
        "Differentiationimages": "",
        "Pluripotencyimages": "",
        "Pluripotency": "",
        "HIV_1": "Negative",
        "HIV_2": "Negative",
        "Sterility": "null",
        "Fungi": "null",
        "Antibiotics_Added": "null",
        "Validation": "null",
        "Specificity": "null",
        "Positive_Controls": "null",
        "Biosafety_and_Handling": "null"
    },
    "productdescription": {
        "id": 17,
        "product_id": 21,
        "Features": "<p><span style=\"font-size: 16px;\">Stemnovate’s Primary Human Fibroblasts (SV-HF-08-500-Fare created by isolating, plating, and expanding in culture before being harvested for cryopreservation resulting in the highest purity, viability and plating efficiency. Above all,&nbsp;the key features of these primary human fibroblasts (SV-HF-08-500-F) are:</span></p><p><span style=\"font-size: 16px;\"><br></span></p><ul><li><p><span style=\"font-size: 16px;\">Highly proliferative and healthy (~90% viability)</span></p></li><li><p><span style=\"font-size: 16px;\">High cell counts (~0.5 million cells per vial)</span></p></li><li><p><span style=\"font-size: 16px;\">Ideal for 2D and 3D cultures, microfluidic devices, co-cultures, tissue engineering, and skin models</span></p></li><li><p><span style=\"font-size: 16px;\">Available as single vials or reserved lots</span></p></li></ul><p><br></p><h4><span style=\"font-size: 16px;\"><h2><span style=\"font-size: 24px;\">Product Testing</span></h2></span></h4><p><span style=\"font-size: 16px;\">Stemnovate’s Primary Human Fibroblasts (SV-HF-08-500-F) are negative for HIV-1, HIV-2, Hepatitis-A, Hepatitis-B, bacteria, and mycoplasma. Our recommendation is not to freeze and thaw the cells repeatedly. Additional options are available for genotyping for drug-metabolizing enzymes along with tailored media to meet custom research needs.&nbsp;</span></p><p><br></p>",
        "ProductTesting": "<p><span style=\"font-size: 16px;\">Stemnovate products are for in-vitro research only and not to be used for any therapeutics in human or animals.</span></p><p><br></p>",
        "Applications": "<p><span style=\"font-size: 16px;\">Stemnovate’s Human Primary Dermal Fibroblasts have many applications, for example:</span></p><p><span style=\"font-size: 16px;\"><br></span></p><ul><li><p><span style=\"font-size: 16px;\">In the assay of cell-cell interaction, adhesion, PCR, laminin, and fibronectin production</span></p></li><li><p><span style=\"font-size: 16px;\">Studying fibroblasts growth factor response</span></p></li><li><p><span style=\"font-size: 16px;\">In immunofluorescent flow cytometry</span></p></li><li><p><span style=\"font-size: 16px;\">Generating cell derivatives for desired research applications</span></p></li></ul><p><span style=\"font-size: 16px;\">Human Dermal Fibroblasts (HDFs) have been responsible for producing the extracellular matrix forming the connective tissue of the skin and play a crucial role during wound healing. For instance, they play an important role in the progression of inflammation by secreting various factors that define the tissue microenvironment and modulate immune cell functions.</span></p><p><span style=\"font-size: 16px;\"><br></span></p><p><span style=\"font-size: 16px;\">HDFs provide an excellent model system to study many aspects of cell physiology. For instance, they are remarkable for their utilization in dozens of research publications related to skin biology and reprogramming/induced pluripotency studies.</span></p><p><span style=\"font-size: 16px;\"><br></span></p><p><span style=\"font-size: 16px;\">Dr. Shinya Yamanaka was awarded the Nobel Prize in 2012 (Takanashi, 2007; 2009) for using Human Dermal Fibroblasts in order to create induced pluripotent stem cells (iPSC) by using Oct3/4, Sox2, Klf4, and c-Myc.</span></p>",
        "Compliance": "<p><span style=\"font-size: 16px;\">Stemnovate holds HTA (Human tissue authority) license, therefore, supporting our industrial and academic customers with our compliant platform.&nbsp;</span></p>"
    },
    "productspecification": {
        "id": 17,
        "product_id": 21,
        "LineHistory": "Caucasian, Female, 40",
        "CellType": "Primary Human Fibroblast",
        "Cryopreservedvolume": "1 ml",
        "Storage": "Liquid Nitrogen",
        "PostFreezeViability": "80%-90%",
        "Growth": "Adherent ",
        "Ethnicity": "Caucasian",
        "Age": "40",
        "Sex": "Female",
        "Passage_Number": "<P4",
        "TissueSource": "Dermal (Skin)",
        "CellNumbers": "500,000",
        "Adherence": "",
        "Viability": "80%-90%",
        "Base_Formulation": "null",
        "Serum": "null",
        "Target_Species": "null",
        "Glutamine": "null",
        "Buffer": "null",
        "Indicator": "null",
        "Growth_Factors": "null",
        "Target": "null",
        "Detection_method": "null",
        "Reaction_Mix_1": "null",
        "Reaction_Mix_2": "null",
        "Internal_Control": "null",
        "Positive_Control_Templates": "null"
    },
    "product_details": {
        "id": 17,
        "product_id": 21,
        "SKU": "SV-HF-08 Frozen",
        "MRP": 0,
        "regular_price": 0,
        "sale_price": 550,
        "currency": "GBP",
        "product_unit": "500k/vial",
        "shipping_cost": 80,
        "offer_price": 0
    },
    "category": {
        "category_name": "Primary Cells  Human"
    }
}

// after update----useGetProducts/ProductRepository/===> api/products/productbycatname.jsx
{
    "id": 79,
    "product_name": "Primary Human Fibroblasts (SV-HF-30-500-L)",
    "product_slug": "primary-human-fibroblasts-sv-hf-30-500-l",
    "product_description": "Primary Human Fibroblasts (SV-HF-30-500-L)",
    "CatalogueNumber": "SV-HF-30-500-L",
    "LotNumber": "001",
    "short_description": "<p>Human Fibroblasts, Dermal (skin) derived, Caucasian, Female, 55</p>",
    "category_id": 13,
    "stock": "In Stock",
    "deliver_type": "Live",
    "product_image": "1710145084440.svg",
    "primary_product_image": "1714383445014.svg",
    "Product_details_pdf": "1705303935856.pdf",
    "description_tab": "true",
    "specification_tab": "true",
    "ViralScreening_tab": "true",
    "Pluripotency_tab": "false",
    "Differentiation_tab": "false",
    "microbiology_viralscreening": {
        "id": 75,
        "product_id": 79,
        "HepatitisA": "Negative",
        "HepatitisB": "Negative",
        "HepatitisC": "Negative",
        "Mycoplasma": "Negative",
        "Inoculationformicrobiologicalgrowth": "Negative",
        "Genotype": "",
        "ReprogrammingMethod": "",
        "ReprogrammingConditions": "",
        "Differentiation": "",
        "Differentiationimages": "",
        "Pluripotencyimages": "",
        "Pluripotency": "",
        "HIV_1": "Negative",
        "HIV_2": "Negative",
        "Sterility": "",
        "Fungi": "",
        "Antibiotics_Added": "",
        "Validation": "",
        "Specificity": "",
        "Positive_Controls": "",
        "Biosafety_and_Handling": ""
    },
    "productdescription": {
        "id": 75,
        "product_id": 79,
        "Features": "<p>Stemnovate&rsquo;s Primary Human Fibroblasts (SV-HF-30-500-L) are created by isolating, plating, and expanding in culture before being harvested for cryopreservation resulting in the highest purity, viability and plating efficiency. Above all, the key features of these primary human fibroblasts (SV-HF-30-500-L) are:</p>\r\n<p>&nbsp;</p>\r\n<ul>\r\n<li>Highly proliferative and healthy (~90% viability)</li>\r\n<li>High cell counts (~0.5 million cells per vial)</li>\r\n<li>Ideal for 2D and 3D cultures, microfluidic devices, co-cultures, tissue engineering, and skin models</li>\r\n<li>Available as single vials or reserved lots</li>\r\n</ul>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<h2>Product Testing</h2>\r\n<p>Stemnovate&rsquo;s Primary Human Fibroblasts (SV-HF-30-500-L) are negative for HIV-1, HIV-2, Hepatitis-A, Hepatitis-B, bacteria, and mycoplasma. Our recommendation is not to freeze and thaw the cells repeatedly. Additional options are available for genotyping for drug-metabolizing enzymes along with tailored media to meet custom research needs.&nbsp;</p>",
        "ProductTesting": "",
        "Applications": "<p>Stemnovate&rsquo;s Human Primary Dermal Fibroblasts have many applications, for example:</p>\r\n<p>&nbsp;</p>\r\n<ul>\r\n<li>In the assay of cell-cell interaction, adhesion, PCR, laminin, and fibronectin production</li>\r\n<li>Studying fibroblasts growth factor response</li>\r\n<li>In immunofluorescent flow cytometry</li>\r\n<li>Generating cell derivatives for desired research applications</li>\r\n</ul>\r\n<p>Human Dermal Fibroblasts (HDFs) have been responsible for producing the extracellular matrix forming the connective tissue of the skin and play a crucial role during wound healing. For instance, they play an important role in the progression of inflammation by secreting various factors that define the tissue microenvironment and modulate immune cell functions.</p>\r\n<p>&nbsp;</p>\r\n<p>HDFs provide an excellent model system to study many aspects of cell physiology. For instance, they are remarkable for their utilization in dozens of research publications related to skin biology and reprogramming/induced pluripotency studies.</p>\r\n<p>&nbsp;</p>\r\n<p>Dr. Shinya Yamanaka was awarded the Nobel Prize in 2012 (Takanashi, 2007; 2009) for using Human Dermal Fibroblasts in order to create induced pluripotent stem cells (iPSC) by using Oct3/4, Sox2, Klf4, and c-Myc.</p>",
        "Compliance": "<p>Stemnovate holds HTA (Human tissue authority) license, therefore, supporting our industrial and academic customers with our compliant platform.&nbsp;</p>"
    },
    "productspecification": {
        "id": 112,
        "product_id": 79,
        "LineHistory": "Caucasian, Female, 55",
        "CellType": "Dermal (Skin)",
        "Cryopreservedvolume": "500k cells/flask",
        "Storage": "Liquid Nitrogen",
        "PostFreezeViability": "70%-90%",
        "Growth": "Adherent ",
        "Ethnicity": "Caucasian",
        "Age": "55",
        "Sex": "Female",
        "Passage_Number": "",
        "TissueSource": "Dermal (Skin)",
        "CellNumbers": "500k",
        "Adherence": "",
        "Viability": "70%-90%",
        "Base_Formulation": "",
        "Serum": "",
        "Target_Species": "",
        "Glutamine": "",
        "Buffer": "",
        "Indicator": "",
        "Growth_Factors": "",
        "Target": "",
        "Detection_method": "",
        "Reaction_Mix_1": "",
        "Reaction_Mix_2": "",
        "Internal_Control": "",
        "Positive_Control_Templates": ""
    },
    "product_details": {
        "id": 198,
        "product_id": 79,
        "SKU": "",
        "MRP": 0,
        "regular_price": 0,
        "sale_price": 800,
        "currency": "GBP",
        "product_unit": "500k cells/flask",
        "shipping_cost": 80,
        "offer_price": 0
    },
    "resources_id": 0,
    "category": {
        "category_name": "Primary Cells  Human"
    }
}


// moduleFilterBy (chagpt)
// =========================
  // const handleRedirect = () => {
  //   const checkedInputs = myFilter.current.querySelectorAll("input:checked");
  //   let queryString = "?";
  //   const selectedFilters = {};
  
  //   checkedInputs.forEach((input) => {
  //     const { name, id } = input;
  //     if (!selectedFilters[name]) {
  //       selectedFilters[name] = [];
  //     }
  //     selectedFilters[name].push(id);
  //   });
  
  //   for (const filterType in selectedFilters) {
  //     queryString += `${filterType}=${selectedFilters[filterType].join(",")}&`;
  //   }
  
  //   router.push(`${pathname}${queryString}`);
  // };

  // ===============================
  //  support multiple selected filters:
//   const handleRedirect = () => {
//   const checkedInputs = myFilter.current.querySelectorAll("input:checked");
//   let queryString = "?";
//   checkedInputs.forEach((input) => {
//     queryString += `${input.name}=${input.id}&`;
//   });
//   router.push(`${pathname}${queryString}`);
// };


// =====================
import React, { useRef } from "react";
import { useRouter } from "next/router";

const ModuleFilterBy = () => {
  const router = useRouter();
  const { query } = router;
  const pathname = router.pathname;
  const myFilter = useRef();

  React.useEffect(() => {
    console.log("sort by", router.query);
  }, [query]);

  const sortByItems = [
    {
      id: 3,
      text: "Male",
      type: "gender",
      url: "Male"
    },
    {
      id: 4,
      text: "Female",
      type: "gender",
      url: "Female"
    },
    {
      id: 5,
      text: "Frozen",
      type: "Delivery_Type",
      url: "Frozen"
    },
    {
      id: 6,
      text: "Live",
      type: "Delivery_Type1",
      url: "Live"
    },
    {
      id: 7,
      text: "Human",
      type: "pType",
      url: "13"
    },
    {
      id: 8,
      text: "Animal",
      type: "pType1",
      url: "14"
    }
  ];

  const handleRedirect = () => {
    const checkedInputs = myFilter.current.querySelectorAll("input:checked");
    const selectedGenders = [];

    checkedInputs.forEach((input) => {
      const { name, id } = input;
      if (name === 'gender') {
        selectedGenders.push(id);
      }
    });

    router.push({
      pathname: pathname,
      query: { gender: selectedGenders }
    });
  };

  return (
    <div>
      <h3>Filter By</h3>
      <div className="ps-shop__sortby" ref={myFilter}>
        {sortByItems.map((item) => (
          <div style={{ width: "45%" }} key={item.id}>
            <input
              className="m-2"
              onChange={handleRedirect}
              type="checkbox"
              id={item.url}
              name={item.type}
            />
            <label htmlFor={item.url}>{item.text} </label>
          </div>
        ))}
      </div>
    </div>
  );
};

export default ModuleFilterBy;



// const handleRedirect = () => {
  //   const checkedInputs = myFilter.current.querySelectorAll("input:checked");
  //   const selectedGenders = [];
    
  //   checkedInputs.forEach((input) => {
  //     const { name, id } = input;
  //     if (name === 'gender') {
  //       selectedGenders.push({ [name]: id });
  //     }
  //   });

  //   const queryString = selectedGenders.map((gender) => {
  //     return `${Object.keys(gender)[0]}=${Object.values(gender)[0]}`;
  //   }).join('&');

  //   router.push(`${pathname}?${queryString}`);
  // };

  // const handleRedirect = () => {
  //   const checkedInputs = myFilter.current.querySelectorAll("input:checked");
  //   let queryString = "?";
  //   const selectedFilters = {};

  //   checkedInputs.forEach((input) => {
  //     const { name, id } = input;
  //     if (!selectedFilters[name]) {
  //       selectedFilters[name] = [];
  //     }
  //     selectedFilters[name].push(id);
  //   });

  //   for (const filterType in selectedFilters) {
  //     queryString += `${filterType}=${selectedFilters[filterType].join(",")}&`;
  //   }

  //   router.push(`${pathname}${queryString}`);
  // };


  // ============================================================
  // ========== ModuleShopPaginationRange=========================
  import React from "react"
import { Button, Dropdown, Menu } from "antd"
import { useRouter } from "next/router"
import Link from "next/link"
import { useLocation } from "react-router-dom"

const ModuleShopPaginationRange = () => {
  const location = useLocation()
  const router = useRouter()
  const { query } = router
  const { _limit, layout, _orderBy, columns } = query
  // console.log("query",query)
  // console.log("_limit",_limit)
  // console.log("layout",layout)
  // console.log("_orderBy",_orderBy)
  // console.log("columns",columns)

  const pathname = router.pathname
  // console.log("pathname",pathname)

  React.useEffect(() => {
    console.log("shopping range", router.query)
  }, [router])

  // {
  //     "_limit": "20",
  //     "columns": "4"
  // }
  const getQueryParam = (item, layout) => {
    const searchParams = new URLSearchParams(pathname)
    console.log("searchParams", searchParams)
    // Replace or append a specific query parameter
    searchParams.set("_limit", item)
    if (layout) {
      searchParams.set("layout", item)
    }

    console.log("-----------", searchParams.toString())
    // Get the updated search string
    return searchParams.toString()
  }

  const getUrl = (limit) => {
    // Parse existing query parameters
    const searchParams = new URLSearchParams(location.search)
    // const existingLimit = searchParams.get("_limit") || ""

    // Define the new _limit value
    // const newLimit = 10 // Set your desired _limit value here

    // Set the new _limit parameter
    searchParams.set("_limit", limit)

    // Construct the new URL with existing parameters and the new _limit parameter
    const newUrl = ${location.pathname}?${searchParams.toString()}

    return newUrl
  }
  const ranges = [10, 20, 50, 100]
  const paginationRangeItems = ranges.map((item) => (
    <Menu.Item key={item}>
      {/* <Link href={${pathname}?${getQueryParam(item, layout)}}> */}
      {/* <Link
        href={`${pathname}?_limit=${item}${layout ? "&layout=" + layout : ""}${
          columns ? "&columns=" + columns : "&columns=4"
        }${_orderBy ? "&_orderBy=" + _orderBy : ""}`}
      > */}
      <Link to={getUrl(item)}>
        <div>{item}</div>
      </Link>
    </Menu.Item>
  ))
  const view = <Menu>{paginationRangeItems}</Menu>
  return (
    <div className="ps-shop__sortby">
      <span>Show</span>
      <Dropdown
        overlay={view}
        placement="bottomLeft"
        className="ps-dropdown-toggle"
      >
        <Button>
          <strong>{_limit ? _limit : 10}</strong>{" "}
          <i className="icon-chevron-down"></i>
        </Button>
      </Dropdown>
    </div>
  )
}

export default ModuleShopPaginationRange

// ============================================================
  // ========== ModuleFilterBy currect=========================
  import React, { useRef } from "react"
import { useRouter } from "next/router"

const ModuleFilterBy = () => {
  const router = useRouter()
  const { query } = router
  const pathname = router.pathname
  const myFilter = useRef()

  React.useEffect(() => {
    console.log("sort by", router.query);
  }, [query])

  const sortByItems = [
    {
      id: 3,
      text: "Male",
      type: "gender",
      url: "Male"
    },
    {
      id: 4,
      text: "Female",
      type: "gender",
      url: "Female"
    },
    {
      id: 5,
      text: "Frozen",
      type: "Delivery_Type",
      url: "Frozen"
    },
    {
      id: 6,
      text: "Live",
      type: "Delivery_Type",
      url: "Live"
    },
    {
      id: 7,
      text: "Human",
      type: "pType",
      url: "13"
    },
    {
      id: 8,
      text: "Animal",
      type: "pType",
      url: "14"
    }
  ]
  const handleRedirect = () => {
    const myInputs = myFilter.current.querySelectorAll("input")
    let queryString = "?"
    myInputs.forEach((node) => {
      if (node.checked) {
        queryString += ${node.name}=${node.id}&
      }
    })
    console.log(queryString)
    router.push(${pathname}${queryString})
  }

  return (
    <div>
      <h3>Filter By</h3>
      <div className="ps-shop__sortby" ref={myFilter}>
        {sortByItems.map((item) => (
          <div style={{ width: "45%" }} key={item.id}>
            {/* <input
              className="m-2"
              onClick={handleRedirect}
              type="radio"
              id={item.url}
              name={item.type}
            /> */}
            <input
              className="m-2"
              onChange={handleRedirect}
              type="checkbox"
              id={item.url}
              name={item.type}
              // checked={checked={query[item.type]?.includes(item.url)} }
            />
            <label htmlFor={item.url}>{item.text} </label>
          </div>
        ))}
      </div>
    </div>
  )
}

export default ModuleFilterBy

// ============================================================
  // ========== getAllProductList=========================

  import prisma from "~/lib/prisma"
export default async function getAllProductList(req, res) {
  res.setHeader("Cache-Control", "s-maxage=86400")
  // eslint-disable-next-line no-useless-catch
  try {
    if (req.method == "GET") {
      var is_promotions = 0
      const {
        is_promotion,
        _limit,
        _orderBy,
        name_contains,
        Delivery_Type,
        pType,
        gender
      } = req.query
      console.log("gender-----------", gender)
      console.log("Delivery_Type-----------", Delivery_Type)
      console.log("pType-----------", pType)
      const newQuery = {}
      if (Delivery_Type) {
        const deliveryTypeArray = Delivery_Type.split(",")
        newQuery["deliver_type"] = {
          in: deliveryTypeArray
        }
      }
      if (pType) {
        // newQuery["category_id"] = parseInt(pType)
        const pTypeArray = pType?.split(",")?.map((ele) => {
          return parseInt(ele)
        })
        newQuery["category_id"] = {
          in: pTypeArray
        }
      }
      if (gender) {
        const genderArray = gender.split(",")
        newQuery["productspecification"] = {
          // Sex: gender
          Sex: {
            in: genderArray
          }
        }
      }
      console.log("newQuery", newQuery)

      let getProducts = {}
      if (is_promotion) {
        is_promotions = is_promotion
        getProducts = await prisma.products.findMany({
          where: { is_promotions: JSON.parse(is_promotions) },
          select: {
            id: true,
            product_name: true,
            product_slug: true,
            product_description: true,
            CatalogueNumber: true,
            LotNumber: true,
            short_description: true,
            category_id: true,
            stock: true,
            deliver_type: true,
            product_image: true,
            primary_product_image: true,
            Product_details_pdf: true,
            description_tab: true,
            specification_tab: true,
            ViralScreening_tab: true,
            Pluripotency_tab: true,
            Differentiation_tab: true,
            microbiology_viralscreening: true,
            productdescription: true,
            productspecification: true,
            product_details: true,
            category: {
              select: {
                category_name: true
              }
            }
          }
        })
      } else if (name_contains) {
        getProducts = await prisma.products.findMany({
          where: {
            product_name: {
              contains: name_contains
            }
          },
          select: {
            id: true,
            product_name: true,
            product_slug: true,
            product_description: true,
            CatalogueNumber: true,
            LotNumber: true,
            short_description: true,
            category_id: true,
            stock: true,
            deliver_type: true,
            product_image: true,
            primary_product_image: true,
            Product_details_pdf: true,
            description_tab: true,
            specification_tab: true,
            ViralScreening_tab: true,
            Pluripotency_tab: true,
            Differentiation_tab: true,
            microbiology_viralscreening: true,
            productdescription: true,
            productspecification: true,
            product_details: true,
            category: {
              select: {
                category_name: true
              }
            }
          }
        })
      } else if (Delivery_Type || pType || gender) {
        getProducts = await prisma.products.findMany({
          where: newQuery,
          select: {
            id: true,
            product_name: true,
            product_slug: true,
            product_description: true,
            CatalogueNumber: true,
            LotNumber: true,
            short_description: true,
            category_id: true,
            stock: true,
            deliver_type: true,
            product_image: true,
            primary_product_image: true,
            Product_details_pdf: true,
            description_tab: true,
            specification_tab: true,
            ViralScreening_tab: true,
            Pluripotency_tab: true,
            Differentiation_tab: true,
            microbiology_viralscreening: true,
            productdescription: true,
            productspecification: true,
            product_details: true,
            type: true,
            category: {
              select: {
                category_name: true
              }
            }
          },
          take: parseInt(_limit),
          orderBy: {
            product_details: {
              sale_price: _orderBy
            }
          }
        })
      } else {
        getProducts = await prisma.products.findMany({
          select: {
            id: true,
            product_name: true,
            product_slug: true,
            product_description: true,
            CatalogueNumber: true,
            LotNumber: true,
            short_description: true,
            category_id: true,
            stock: true,
            deliver_type: true,
            product_image: true,
            primary_product_image: true,
            Product_details_pdf: true,
            description_tab: true,
            specification_tab: true,
            ViralScreening_tab: true,
            Pluripotency_tab: true,
            Differentiation_tab: true,
            microbiology_viralscreening: true,
            productdescription: true,
            productspecification: true,
            product_details: true,
            category: {
              select: {
                category_name: true
              }
            }
          },
          take: parseInt(_limit),
          orderBy: {
            product_details: {
              sale_price: _orderBy
            }
          }
        })
      }
      res.status(200).json(getProducts)
    } else {
      res.status(400).json("Bad Request")
    }
  } catch (error) {
    throw error
  }
}


// ModuleShopAction
import React, { useState } from "react"
import { useRouter } from "next/router"
import dynamic from "next/dynamic"

const Image = dynamic(() => import("~/components/elements/Image"), {
  loading: () => <p>Loading...</p>
})
const ModuleShopSortBy = dynamic(
  () => import("~/components/partials/shop/modules/ModuleShopSortBy"),
  { loading: () => <p>Loading...</p> }
)
const ModuleShopPaginationRange = dynamic(
  () => import("~/components/partials/shop/modules/ModuleShopPaginationRange"),
  { loading: () => <p>Loading...</p> }
)

const ModuleShopActions = () => {
  const router = useRouter()
  const { layout, _orderBy, _limit, columns } = router.query
  const pathname = router.pathname

  React.useEffect(() => {
    console.log("layout ", router.query)
  }, [layout])

  const layoutItems = [
    {
      id: 1,
      url: `${pathname}?layout=list${_orderBy ? "&_orderBy=" + _orderBy : ""}${
        _limit ? "&_limit=" + _limit : "&_limit=10"
      }`,
      image: "/static/img/icon/bars.svg",
      imageActive: "/static/img/icon/bars.svg"
    },
    {
      id: 2,
      url: `${pathname}?layout=grid&columns=2${
        _orderBy ? "&_orderBy=" + _orderBy : ""
      }${_limit ? "&_limit=" + _limit : "&_limit=10"}`,
      image: "/static/img/icon/gird2.svg",
      imageActive: "/static/img/icon/gird2.svg"
    },
    {
      id: 3,
      url: `${pathname}?layout=grid&columns=3${
        _orderBy ? "&_orderBy=" + _orderBy : ""
      }${_limit ? "&_limit=" + _limit : "&_limit=10"}`,
      image: "/static/img/icon/gird3.svg",
      imageActive: "/static/img/icon/gird3.svg"
    },
    {
      id: 4,
      url: `${pathname}?layout=grid&columns=4${
        _orderBy ? "&_orderBy=" + _orderBy : ""
      }${_limit ? "&_limit=" + _limit : "&_limit=10"}`,
      image: "/static/img/icon/gird4.svg",
      imageActive: "/static/img/icon/gird4.svg"
    }
  ]

  const [selectedLayout, setSelectedLayout] = useState(layoutItems[3])
  //   {
  //     "id": 1,
  //     "url": "/Products?layout=list&_limit=10",
  //     "image": "/static/img/icon/bars.svg",
  //     "imageActive": "/static/img/icon/bars.svg"
  // }

  function handleSelecteLayout(e, layout) {
    console.log("layout============", layout)
    e.preventDefault()
    setSelectedLayout(layout)
    const searchParams = new URLSearchParams(router.query)

    searchParams.delete("layout")
    searchParams.delete("columns")

    if (layout.id === 1) {
      searchParams.set("layout", "list")
    } else {
      searchParams.set("layout", "grid")
      searchParams.set("columns", layout.id)
    }

    if (!_limit) {
      searchParams.set("_limit", 10)
    }

    const newUrl = `${router.pathname}?${searchParams.toString()}`;
    console.log("newUrl", newUrl)
    router.push(newUrl)
  }

  //   function handleSelecteLayout(e, layout) {
  //     console.log("layout============", layout)
  //     e.preventDefault()
  //     setSelectedLayout(layout)
  //     router.push(process.env.NEXT_BASE_URL + "" + layout.url, undefined, {
  //       scroll: false
  //     })
  //   }

  // Views
  const swichersItemsView = layoutItems.map((item) => (
    <div
      className={`div-shop__layout-switcher ${
        item.id === selectedLayout.id ? "active" : ""
      }`}
      onClick={(e) => handleSelecteLayout(e, item)}
      key={item.id}
    >
      <Image src={item.image} alt={item.image} width={1000} height={800} />
    </div>
  ))

  return (
    <div className="ps-shop__actions">
      <div className="ps-shop__actions-left">
        <div className="ps-shop__layout-switchers">{swichersItemsView}</div>
      </div>
      <div className="ps-shop__actions-right">
        <ModuleShopSortBy />
        <ModuleShopPaginationRange />
      </div>
    </div>
  )
}

export default ModuleShopActions